---
layout: side_drawer.html
options: pico-css
theme: light
title: Search page
description: Brief document description
---

<!--Inline list item template -->
<div z-view="inline/result-item-view">
    <a #ref><h3 #doc.title>Item title</h3></a>
    <div #doc.description self="size-x1">Description</div>
</div>
<style media="#inline/result-item-view">
    h3 { margin: 0; }
    div { margin-bottom: 48px; }
</style>

<div z-load="default">

    <div class="field" layout="row center-left">
        <input #search-input aria-label="Search" type="search" placeholder="Search this site">
    </div>
    <ol #results></ol>
    <div #results-none style="display: none">
        <p>No results found.</p>
    </div>

    <!-- zUIx list_view component -->
    <div #results-list z-load="@lib/controllers/list_view">
        <!-- Place holder is mandatory for JS-only compoments.. -->
        Loading listview...
    </div>

    <script type="jscript">
      // get the search index
      let searchIndex = null;
      /** @type {elasticlunr.Index} searchIndex */
      fetch('{{ app.baseUrl }}search-index.json').then((response) =>
        response.json().then((rawIndex) => {
          searchIndex = elasticlunr.Index.load(rawIndex);
          elasticlunr.clearStopWords(); // the word 'About' is still ignored
        })
      );
      // update results list on 'keyup'
      $searchInput.on('keyup', (e, v) => {
        if (!_resultsList) return;
        const term = $searchInput.value();
        const results = searchIndex.search(term, {
          bool: 'OR',
          expand: true
        });
        _resultsList.clear();
        _resultsList.model({
          itemList: results,
          getItem: function(index, item) {
            // Return the item data. Each item could also be rendered with a different template,
            // in this case all items are using the 'card-template' which is defined
            // inline in the same page. For further information about ZUIX templates referer
            // to the documentation http://genielabs.github.io/zuix/#/docs .
            return {
              itemId: index,
              componentId: 'inline/result-item-view',
              options: {
                controller: zuix.controller(function(cp){}),
                className: 'item',
                model: item
              }
            };
          }
        });
      });
    </script>

</div>

<!--Only 5.7kb GZipped. You may want to bundle this with your application code. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"></script>
